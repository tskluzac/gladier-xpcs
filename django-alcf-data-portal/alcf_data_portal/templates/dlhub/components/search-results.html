{% load static humanize %}

{% block headextras %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

{% endblock %}
<h3 class="h3">Results</h3>
{% if search.total %}
<h6 class="h6">{{search.total}} servables found</h6>
{% endif %}
<div id="search-result" class="search-result">
  {% for result in search.search_results %}
    <div class="card my-3">
      <div class="card-header">
        <h3 class="search-title">
          <a href="{% url 'detail' globus_portal_framework.index result.subject %}">{{result.title|default:'Sample'}}</a>
        </h3>
        <h7>name: {{result.all.0.dlhub.shorthand_name}}</h7>
      </div>
      <div class="card-body">
      <h5>Authors</h5>
        {% for creator in result.all.0.datacite.creators %}
          {{creator.givenName}} {{creator.familyName}}{% if not forloop.last %}; {% endif %}
        {% endfor %}
        <table class="table table-sm borderless">
          <tbody>
          <tr>
            {% for search_result in result.search_results %}
            <th>{{search_result.name}}</th>
            {% endfor %}
          </tr>
          <tr>
            {% for search_result in result.search_results %}
            {% if search_result.type == 'int' %}
            <td>{{search_result.value|intcomma}}</td>
            {% elif search_result.type == 'list' %}
            <td>
              {% for field in search_result.value %}
              {{field}}
              {% endfor %}
            </td>
            {% else %}
            <td>{{search_result.value}}</td>
            {% endif %}
            {% endfor %}
          </tr>
          </tbody>
        </table>
         {% for domain in result.all.0.dlhub.domains %}
          <span class="badge badge-secondary">
            {{domain}}
          </span>
        {% endfor %}

        {% comment %} {% for info in result.detailed_info %}
        <p class="card-text my-0 py-0"><strong>{{info.name}}</strong>:
              {% if info.type == 'list' %}
                {% for field in info.value %}
                {{field}}
                {% endfor %}
              {% else %}
                {{info.value}}
              {% endif %}
        </p>
        {% endfor %} {% endcomment %}
      </div>
    </div>
  {% endfor %}
</div>
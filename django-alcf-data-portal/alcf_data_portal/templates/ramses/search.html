{% extends "search.html" %}
{% load index_template %}

{%block body%}

<div class="container">

  <div class="row">
    <div class="col-md-12">
      <form id="search-form" class="my-4" name="search_form" action="{% url 'search' globus_portal_framework.index %}">
        <input type="text" id="search-input" autocomplete="off"
               data-provide="typeahead" name="q"
               value="{{request.session.search.query}}" placeholder="Start your search here">
        <button id="search-btn" type="submit" class="btn btn-default">
          <i class="fas fa-search"></i>
        </button>
      </form>
      <div class="col-md-12 mb-5 border-bottom">
        <nav class="nav nav-pills nav-fill mb-1">
          {% for name, val in ramses_search_categories.items %}
          <a class="nav-item nav-link font-weight-bold {% if val == ramses_active_search_category %}active{%endif%}"
             href="{% url 'search' globus_portal_framework.index %}?q=*&page=1&filter.perfdata.category.value={{val}}"
            >{{name}}
          </a>
          {% endfor %}
        </nav>
      </div>

    </div>
  </div>

  <div class="row">
    <div id="sidebar" class="col-xs-12 col-sm-4 col-md-4">
      <div id="filters">
        <div id="facet-container">
          <form id="facet-form" action="{% url 'search' globus_portal_framework.index %}">
            {% include "components/search-facets.html" %}
          </form>
        </div>
      </div>
    </div>

    <div id="content" class="col-xs-12 col-sm-8 col-md-8">

      <div id="results" style="display: inline;">
        {% if not request.user.username %}
        <div class="alert alert-dark" role="alert">
          NOTE: Your search results are limited. Logging in can improve search
          results by displaying private results if you have permissions associated
          with your account.
        </div>
        {% endif %}
        {% index_template 'components/search-results.html' as it_search_results %}
        {% include it_search_results %}

        <div class="row justify-content-md-center">
          <nav class="mt-3 mb-5" aria-label="Search Results Pages">
            <ul class="pagination">
              {% for page in search.pagination.pages %}
              {% if page.number == search.pagination.current_page %}
              <li class="page-item active">
              {% else %}
              <li class="page-item">
              {% endif %}
                <a class="page-link" href="#" onclick="customSearch({{page.number}});">{{page.number}}</a>
              </li>
              {% endfor %}
            </ul>
          </nav>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}